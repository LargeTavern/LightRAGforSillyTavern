# LightRAG for SillyTavern 常见问题

中文 | [English](FAQ.md)

## Q1: 什么是LightRAG？
LightRAG是由香港大学研究人员开发的检索增强生成(RAG)系统。它通过将图结构整合到文本索引和检索过程中来增强大语言模型的性能。系统采用双层检索方法，结合了低层（具体实体和关系）和高层（更广泛的主题）信息发现，使其在理解和检索复杂信息方面比传统RAG系统更有效。

## Q2: 应该使用什么模型？
- 对于LightRAG操作（知识图谱创建和关键词提取）：
  - 中端模型如GPT-4o-mini和Gemini 1.5 Flash（不强烈推荐8B模型，因为它有时会无法正确格式化JSON）根据测试效果良好
  - 顶级模型仅对创建知识图谱有用
  - 这些模型能够有效处理图结构创建和关键词处理

- 对于嵌入：
  - 虽然mxbai-embedding-large可用，但建议查看MTEB排行榜 (https://huggingface.co/spaces/mteb/leaderboard)
  - 选择适合您系统要求的最佳性能模型

- 对于最终响应生成：
  - 可以继续使用您当前的角色扮演模型
  - 这样可以在利用LightRAG改进检索的同时保持角色回复的一致性

## Q3: LightRAG与酒馆的RAG（数据库/向量存储）相比如何？
根据LightRAG for SillyTavern原作者的测试，LightRAG的检索能力比基础RAG实现的准确度高出约两倍。

## Q4: 如何更新知识图谱？如何添加或删除文档？
目前文档管理功能有限：
- 添加新文档是可以的
- 无法更新或删除单个文档
- 要进行更改，需要删除工作文件夹并完全重建
- 这是当前版本的已知限制

## Q5: 这能替代世界书吗？
不能，LightRAG是对世界书的补充而非替代：
- 较少使用的信息应该转换到知识图谱中
- 功能性信息（持续激活/强制激活）应该保留在世界书中

原作者注：
```但如果真的很需要一个大型世界观，尤其是动辄数万token的世界书，RAG是几乎必不可少的。因为世界书的检索能力比起Data Bank还要差一些，在长文本的情况下世界书的效用已经捉襟见肘。

---

在测试过之后，使用LightRAG时非功能性的世界书就别进来了（）```

## Q6: 这能改善聊天向量化吗？
不能，LightRAG服务于不同的目的：
- 聊天向量化在实践中效果不佳
- RAG应该仅用于在需要时提供额外上下文（聊天历史之外的上下文），使用方式类似于酒馆的数据库功能
- 摘要功能仍然应该与LightRAG一起使用
- LightRAG和酒馆的RAG实际上都会使用更多的token进行检索，而不是更少 - 您应该使用具有高token输入容量的模型

## Q7: 这个分支相比原版有什么改进？
本分支包含以下重要改进：
- 整合了最新的LightRAG代码库
- 完整的英文翻译（在`english-master`分支中提供）
- 添加了文件目录插入支持，用于知识图谱创建
- 全面的代码清理
- 各种使用体验改进

## Q8: 使用LightRAG for SillyTavern时遇到的错误是什么？
常见问题包括：
- 模型相关错误：
  * 模型能力不足（产生幻觉/指令遵循能力差）
  * 超出token限制
  * API响应无效
- 系统相关问题：
  * 网络超时或连接失败
- 使用问题：
  * .env文件配置错误

其他问题请查看酒馆/LightRAG控制台，如有需要请提交错误报告。
